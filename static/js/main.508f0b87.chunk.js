(this.webpackJsonpkelly=this.webpackJsonpkelly||[]).push([[0],{64:function(e,t,n){},65:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),s=n(13),o=n.n(s),l=(n(64),n(29)),i=n(18),r=n(15),u=n(1),d=n(55),b=n(16),j=n(50),m=n(51),f=function(){function e(){Object(j.a)(this,e)}return Object(m.a)(e,[{key:"getStocks",value:function(){return fetch("data/stock.json").then((function(e){return e.json()})).then((function(e){return e.data}))}}]),e}(),h=n(54),p=n(10),O=n(52),x=n(27),g=n(33),v=n(42),y=n(28),N=(n(65),n(2)),S=function(){var e={id:null,code:"0000",confidence:.2,ratio:0,win:1,loss:1,asset_allocation:0,roi:0,asset_money:0},t=Object(a.useState)([]),n=Object(r.a)(t,2),s=n[0],o=n[1],j=Object(a.useState)(null),m=Object(r.a)(j,2),S=m[0],k=m[1],w=Object(a.useState)(!1),C=Object(r.a)(w,2),F=C[0],L=C[1],P=Object(a.useState)(!1),_=Object(r.a)(P,2),D=_[0],I=_[1],R=Object(a.useState)(!1),T=Object(r.a)(R,2),U=T[0],M=T[1],V=Object(a.useState)(e),q=Object(r.a)(V,2),W=q[0],A=q[1],B=Object(a.useState)(null),E=Object(r.a)(B,2),H=E[0],z=E[1],J=Object(a.useState)(!1),Y=Object(r.a)(J,2),K=Y[0],G=Y[1],Q=Object(a.useState)(null),X=Object(r.a)(Q,2),Z=X[0],$=X[1],ee=Object(a.useRef)(null),te=Object(a.useRef)(null),ne=new f;Object(a.useEffect)((function(){ne.getStocks().then((function(e){return o(e)}))}),[]);var ae=function(e){return e.toLocaleString("en-US",{style:"percent"})},ce=function(e){return e.toLocaleString("en-US",{style:"percent",minimumFractionDigits:2})},se=function(){S?(A(e),re()):ee.current.show({severity:"warn",summary:"Warning",detail:"The money value must be provided",life:3e3})},oe=function(){G(!1),L(!1)},le=function(){I(!1)},ie=function(){M(!1)},re=function(){if(console.log("saveStock",W),W.code){if(G(!0),W.code.trim()){var t=Object(i.a)(s),n=Object(l.a)({},W);if(W.id){var a=ue(W.id);console.log("findIndexById(stock.id)",a),t[a]=n,ee.current.show({severity:"success",summary:"Successful",detail:"Stock Updated",life:3e3})}else n.id=de(),n.image="product-placeholder.svg",t.push(n),ee.current.show({severity:"success",summary:"Successful",detail:"Stock Created",life:3e3});o(t),L(!1),A(e)}}else ee.current.show({severity:"warn",summary:"Warning",detail:"The stock code must be provided",life:3e3})},ue=function(e){for(var t=-1,n=0;n<s.length;n++)if(s[n].id===e){t=n;break}return t},de=function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<5;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e},be=function(){te.current.exportCSV()},je=function(){M(!0)},me=function(e){var t=e.confidence-(1-e.confidence)/(e.win/e.loss);return t<0?0:t};var fe=function(e,t){return e/t.reduce((function(e,t){return e+t}))},he=function(e,t){return e*(1+t)},pe=function(e,t){var n=e.ratio,a=e.confidence;console.log("\u820a\u7684stock info",Object(l.a)({},W)),console.log("index",t),console.log("\u65b0\u7684\u5efa\u8b70\u6bd4\u4f8b",e.ratio);var c=Object(i.a)(s),o=c.length;c[t].ratio=n,c[t].confidence=a,console.log(o);var r=c.map((function(e){return e.ratio})),u=fe(n,r),d=he(u,a);e.roi=d,e.asset_allocation=u,e.asset_money=S*u,c[t].roi=d,c[t].asset_allocation=u,c[t].asset_money=S*u,console.log("\u5168\u90e8\u5efa\u8b70\u6bd4\u4f8b"),console.log("\u8cc7\u7522\u914d\u7f6e\u7387",u),console.log("ROI",d),Oe(c,r,t),console.log("\u66f4\u65b0\u5f8c\u7684\u55ae\u7b46data",e),console.log(c),A(e)},Oe=function(e,t,n){for(var a=0;a<e.length;a++)if(a!==n){var c=e[a].ratio,s=e[a].confidence,o=fe(c,t),l=he(o,s);e[a].asset_allocation_value=o,e[a].roi=l,e[a].asset_money=S*o}return e},xe=function(e,t){var n=e.value||0,a=Object(l.a)({},W),c=ue(W.id);a["".concat(t)]=n,a.ratio=me({confidence:a.confidence,win:a.win,loss:a.loss}),A(a),pe(a,c)},ge=Object(N.jsxs)("div",{className:"table-header",children:[Object(N.jsx)("h5",{className:"p-mx-0 p-my-1",children:"Manage Stocks"}),Object(N.jsxs)("span",{className:"p-input-icon-left",children:[Object(N.jsx)(g.a,{id:"inputMoney",placeholder:"Input money...",min:0,value:S,onValueChange:function(e){return k(e.value)},mode:"currency",currency:"USD",locale:"en-US",required:!0,className:Object(u.h)({"p-invalid":!S})}),!S&&Object(N.jsx)("small",{className:"p-error",children:"Money is required."})]}),Object(N.jsxs)("span",{className:"p-input-icon-left",children:[Object(N.jsx)("i",{className:"pi pi-search"}),Object(N.jsx)(y.a,{type:"search",onInput:function(e){return $(e.target.value)},placeholder:"Search..."})]})]}),ve=Object(N.jsxs)(c.a.Fragment,{children:[Object(N.jsx)(p.a,{label:"Cancel",icon:"pi pi-times",className:"p-button-text",onClick:oe}),Object(N.jsx)(p.a,{label:"Save",icon:"pi pi-check",className:"p-button-text",onClick:re})]}),ye=Object(N.jsxs)(c.a.Fragment,{children:[Object(N.jsx)(p.a,{label:"No",icon:"pi pi-times",className:"p-button-text",onClick:le}),Object(N.jsx)(p.a,{label:"Yes",icon:"pi pi-check",className:"p-button-text",onClick:function(){var t=s.filter((function(e){return e.id!==W.id}));o(t),I(!1),A(e),ee.current.show({severity:"success",summary:"Successful",detail:"Stock Deleted",life:3e3})}})]}),Ne=Object(N.jsxs)(c.a.Fragment,{children:[Object(N.jsx)(p.a,{label:"No",icon:"pi pi-times",className:"p-button-text",onClick:ie}),Object(N.jsx)(p.a,{label:"Yes",icon:"pi pi-check",className:"p-button-text",onClick:function(){var e=s.filter((function(e){return!H.includes(e)}));o(e),M(!1),z(null),ee.current.show({severity:"success",summary:"Successful",detail:"Stocks Deleted",life:3e3})}})]});return Object(N.jsxs)("div",{className:"datatable-crud-demo",children:[Object(N.jsx)(h.a,{ref:ee}),Object(N.jsxs)("div",{className:"card",children:[Object(N.jsx)(O.a,{className:"p-mb-4",left:function(){return Object(N.jsxs)(c.a.Fragment,{children:[Object(N.jsx)(p.a,{label:"New",icon:"pi pi-plus",className:"p-button-success p-mr-2",onClick:se}),Object(N.jsx)(p.a,{label:"Delete",icon:"pi pi-trash",className:"p-button-danger",onClick:je,disabled:!H||!H.length})]})},right:function(){return Object(N.jsx)(c.a.Fragment,{children:Object(N.jsx)(p.a,{label:"Export",icon:"pi pi-upload",className:"p-button-help",onClick:be})})}}),Object(N.jsxs)(d.a,{ref:te,value:s,selection:H,onSelectionChange:function(e){return z(e.value)},dataKey:"id",paginator:!0,rows:10,rowsPerPageOptions:[5,10,25],paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} stocks",globalFilter:Z,header:ge,responsiveLayout:"scroll",children:[Object(N.jsx)(b.a,{selectionMode:"multiple",headerStyle:{width:"3rem"},exportable:!1}),Object(N.jsx)(b.a,{field:"id",header:"ID",sortable:!0,className:"datatable-column",hidden:!0}),Object(N.jsx)(b.a,{field:"code",header:"\u80a1\u7968\u4ee3\u865f",sortable:!0,className:"datatable-column"}),Object(N.jsx)(b.a,{field:"confidence",header:"\u4fe1\u5fc3\u5ea6",sortable:!0,body:function(e){return ae(e.confidence)},className:"datatable-column"}),Object(N.jsx)(b.a,{field:"ratio",header:"\u5efa\u8b70\u6bd4\u4f8b",sortable:!0,body:function(e){return ae(e.ratio)},className:"datatable-column"}),Object(N.jsx)(b.a,{field:"win",header:"\u505c\u5229",sortable:!0,body:function(e){return ae(e.win/100)},className:"datatable-column"}),Object(N.jsx)(b.a,{field:"loss",header:"\u505c\u640d",sortable:!0,body:function(e){return ae(e.loss/100)},className:"datatable-column"}),Object(N.jsx)(b.a,{field:"asset_allocation",header:"\u8cc7\u7522\u914d\u7f6e\u7387",sortable:!0,body:function(e){return ce(e.asset_allocation)},className:"datatable-column"}),Object(N.jsx)(b.a,{field:"roi",header:"\u6295\u5831\u7387",sortable:!0,body:function(e){return ce(e.roi)},className:"datatable-column"}),Object(N.jsx)(b.a,{field:"asset_money",header:"\u5efa\u8b70\u914d\u7f6e\u91d1\u984d",sortable:!0,body:function(e){return e.asset_money.toLocaleString("en-US",{style:"currency",currency:"USD"})},className:"datatable-column"}),Object(N.jsx)(b.a,{body:function(e){return Object(N.jsxs)(c.a.Fragment,{children:[Object(N.jsx)(p.a,{icon:"pi pi-pencil",className:"p-button-rounded p-button-success p-mr-2",onClick:function(){return function(e){console.log("editStock",e),S?(A(Object(l.a)({},e)),L(!0)):ee.current.show({severity:"warn",summary:"Warning",detail:"The money value must be provided",life:3e3})}(e)}}),Object(N.jsx)(p.a,{icon:"pi pi-trash",className:"p-button-rounded p-button-warning",onClick:function(){return function(e){A(e),I(!0)}(e)}})]})},exportable:!1,className:"datatable-column"})]})]}),Object(N.jsxs)(v.a,{visible:F,header:"Stock Details",modal:!0,className:["p-fluid","dialog-width"],footer:ve,onHide:oe,children:[Object(N.jsxs)("div",{className:"p-field",children:[Object(N.jsx)("label",{htmlFor:"code",children:"\u80a1\u7968\u4ee3\u865f"}),Object(N.jsx)(y.a,{id:"code",value:W.code||"",onChange:function(e){return function(e,t){var n=e.target&&e.target.value||"",a=Object(l.a)({},W);a["".concat(t)]=n,A(a)}(e,"code")},required:!0,autoFocus:!0,className:Object(u.h)({"p-invalid":K&&!W.code})}),!W.code&&Object(N.jsx)("small",{className:"p-error",children:"Code is required"})]}),Object(N.jsxs)("div",{className:"p-field",children:[Object(N.jsx)("label",{htmlFor:"confidence",children:"\u4fe1\u5fc3\u5ea6(%)"}),Object(N.jsx)(x.a,{value:W.confidence,options:[{label:"0%",value:0},{label:"20%",value:.2},{label:"40%",value:.4},{label:"60%",value:.6},{label:"80%",value:.8},{label:"100%",value:1}],optionLabel:"label",optionValue:"value",onChange:function(e){var t=Object(l.a)({},W),n=ue(W.id),a=e.value;t.confidence=a;var c=me({confidence:a,win:t.win,loss:t.loss});t.ratio=c,A(t),pe(t,n)},placeholder:"Select a confidence value"})]}),Object(N.jsxs)("div",{className:"p-formgrid p-grid",children:[Object(N.jsxs)("div",{className:"p-field p-col",children:[Object(N.jsx)("label",{htmlFor:"win",children:"\u505c\u5229(%)"}),Object(N.jsx)(g.a,{id:"win",value:W.win,min:1,max:100,onValueChange:function(e){return xe(e,"win")},integeronly:!0}),!W.win&&Object(N.jsx)("small",{className:"p-error",children:"Lock in gain is must greater than 0"})]}),Object(N.jsxs)("div",{className:"p-field p-col",children:[Object(N.jsx)("label",{htmlFor:"loss",children:"\u505c\u640d(%)"}),Object(N.jsx)(g.a,{id:"loss",value:W.loss,min:1,max:100,onValueChange:function(e){return xe(e,"loss")},integeronly:!0}),!W.loss&&Object(N.jsx)("small",{className:"p-error",children:"Stop-loss point is must greater than 0"})]})]})]}),Object(N.jsx)(v.a,{visible:D,className:"dialog-width",header:"Confirm",modal:!0,footer:ye,onHide:le,children:Object(N.jsxs)("div",{className:"confirmation-content",children:[Object(N.jsx)("i",{className:"pi pi-exclamation-triangle p-mr-3",style:{fontSize:"2rem"}}),W&&Object(N.jsxs)("span",{children:["Are you sure you want to delete ",Object(N.jsx)("b",{children:W.code}),"?"]})]})}),Object(N.jsx)(v.a,{visible:U,className:"dialog-width",header:"Confirm",modal:!0,footer:Ne,onHide:ie,children:Object(N.jsxs)("div",{className:"confirmation-content",children:[Object(N.jsx)("i",{className:"pi pi-exclamation-triangle p-mr-3",style:{fontSize:"2rem"}}),W&&Object(N.jsx)("span",{children:"Are you sure you want to delete the selected stocks?"})]})})]})},k=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,83)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),s(e),o(e)}))},w=n(82),C=n(80);o.a.render(Object(N.jsxs)(c.a.Fragment,{children:[Object(N.jsx)(w.a,{}),Object(N.jsx)(C.a,{maxWidth:"xl",children:Object(N.jsx)(S,{})})]}),document.getElementById("root")),k()}},[[69,1,2]]]);
//# sourceMappingURL=main.508f0b87.chunk.js.map